<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Extrator de Paleta de Cores</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="d-flex flex-column vh-100">
    <div class="container-fluid flex-grow-1 d-flex flex-column overflow-hidden">
        <div class="row flex-grow-1 overflow-hidden">
            <!-- Painel Esquerdo - Upload e Controles -->
            <div class="col-md-4 p-3 border-end d-flex flex-column" style="background-color: #f8f9fa;">
                <div class="mb-3 text-center">
                    <h2><i class="bi bi-palette"></i> Extrator de Cores</h2>
                </div>

                <!-- Accordion -->
                <div class="accordion" id="controlsAccordion">
                    <!-- Upload de Arquivo -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#uploadCollapse" aria-expanded="true">
                                <i class="bi bi-upload me-2"></i> Upload de Arquivo
                            </button>
                        </h2>
                        <div id="uploadCollapse" class="accordion-collapse collapse show" data-bs-parent="#controlsAccordion">
                            <div class="accordion-body p-0">
                                <!-- Área de Drop -->
                                <div id="drop-zone" class="drop-zone d-flex flex-column justify-content-center align-items-center p-4">
                                    <i class="bi bi-image fs-1 mb-3"></i>
                                    <p>Arraste e solte sua imagem aqui</p>
                                    <small class="text-muted">ou</small>
                                    <button id="select-file-btn" class="btn btn-primary btn-sm mt-3">
                                        <i class="bi bi-folder2-open"></i> Selecionar Arquivo
                                    </button>
                                    <input type="file" id="file-input" accept="image/*" class="d-none">
                                </div>

                                <div id="file-info" class="d-none p-3 text-center border-top">
                                    <img id="preview-image" src="#" class="img-thumbnail mb-2" style="max-height: 120px;">
                                    <p id="file-name" class="mb-1 small"></p>
                                    <button id="clear-file-btn" class="btn btn-sm btn-outline-danger">
                                        <i class="bi bi-x-circle"></i> Remover
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Configurações -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#configCollapse">
                                <i class="bi bi-sliders me-2"></i> Configurações
                            </button>
                        </h2>
                        <div id="configCollapse" class="accordion-collapse collapse" data-bs-parent="#controlsAccordion">
                            <div class="accordion-body">
                                <div class="row g-3">
                                    <div class="col-6">
                                        <label for="num_colors" class="form-label small mb-1">Número de Cores</label>
                                        <input type="range" class="form-range" min="1" max="12" step="1" id="num_colors" name="num_colors" value="5">
                                        <div class="text-center small"><span id="num_colors_value">5</span></div>
                                    </div>
                                    <div class="col-6">
                                        <label for="tolerance" class="form-label small mb-1">Tolerância</label>
                                        <input type="range" class="form-range" min="0" max="100" step="5" id="tolerance" name="tolerance" value="30">
                                        <div class="text-center small"><span id="tolerance_value">30</span></div>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary w-100 mt-2" id="extract-btn">
                                    <i class="bi bi-magic"></i> Extrair Paleta
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Espaço vazio para empurrar o conteúdo para cima -->
                <div class="flex-grow-1"></div>
                
                <!-- Rodapé -->
                <div class="text-center text-muted small mt-auto pt-3">
                    <p>Extrator de Paleta v1.0</p>
                </div>
            </div>

            <!-- Painel Direito - Resultados -->
            <div class="col-md-8 p-3 d-flex flex-column">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="mb-0"><i class="bi bi-grid"></i> Paleta de Cores</h3>
                    <div>
                        <button id="view-json-btn" class="btn btn-outline-secondary btn-sm me-2">
                            <i class="bi bi-code-square"></i> Ver JSON
                        </button>
                        <button id="download-btn" class="btn btn-success btn-sm">
                            <i class="bi bi-download"></i> Baixar
                        </button>
                        <button id="view-examples-btn" class="btn btn-info btn-sm ms-2">
                            <i class="bi bi-eye"></i> Aplicações
                        </button>
                    </div>
                </div>

                <div id="palette-container" class="row g-2 flex-grow-1 overflow-auto">
                    <div class="col-12 text-center text-muted py-5" id="empty-palette-message">
                        <i class="bi bi-palette fs-1"></i>
                        <p class="mt-3">Sua paleta aparecerá aqui</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para JSON -->
    <div class="modal fade" id="jsonModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-code-square"></i> Dados da Paleta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="jsonTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="full-tab" data-bs-toggle="tab" data-bs-target="#full-tab-pane" type="button" role="tab">Completo</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="simplified-tab" data-bs-toggle="tab" data-bs-target="#simplified-tab-pane" type="button" role="tab">Simplificado</button>
                        </li>
                    </ul>
                    <div class="tab-content" id="jsonTabsContent">
                        <div class="tab-pane fade show active" id="full-tab-pane" role="tabpanel" tabindex="0">
                            <pre class="json-output mt-3" id="json-output-full"></pre>
                        </div>
                        <div class="tab-pane fade" id="simplified-tab-pane" role="tabpanel" tabindex="0">
                            <pre class="json-output mt-3" id="json-output-simplified"></pre>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                    <button type="button" class="btn btn-primary" onclick="copyJson()">
                        <i class="bi bi-clipboard"></i> Copiar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Exemplos de Aplicação -->
    <div class="modal fade" id="examplesModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-eye"></i> Aplicação da Paleta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h6 class="mb-0"><i class="bi bi-text-paragraph"></i> Texto</h6>
                                </div>
                                <div class="card-body">
                                    <div id="text-example" class="example-preview p-3">
                                        <h4 style="color: var(--color-1);">Título Principal</h4>
                                        <h5 style="color: var(--color-2);">Subtítulo</h5>
                                        <p style="color: var(--color-3);">Este é um parágrafo de exemplo demonstrando como a paleta pode ser aplicada em textos e elementos visuais.</p>
                                        <small style="color: var(--color-4);">Texto secundário com outra cor da paleta.</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h6 class="mb-0"><i class="bi bi-card-image"></i> Cartão</h6>
                                </div>
                                <div class="card-body">
                                    <div id="card-example" class="example-preview p-3">
                                        <div class="card border-0" style="background: linear-gradient(135deg, var(--color-1), var(--color-2)); color: white;">
                                            <div class="card-body">
                                                <h5 class="card-title">Cartão Exemplo</h5>
                                                <p class="card-text">Demonstração de cartão usando gradiente com cores da paleta extraída.</p>
                                                <button class="btn btn-light btn-sm" style="color: var(--color-1);">Ação</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h6 class="mb-0"><i class="bi bi-bar-chart"></i> Gráfico</h6>
                                </div>
                                <div class="card-body">
                                    <div id="chart-example" class="example-preview p-3 d-flex align-items-end justify-content-around">
                                        <div style="width: 30px; height: 60px; background-color: var(--color-1); border-radius: 4px;"></div>
                                        <div style="width: 30px; height: 80px; background-color: var(--color-2); border-radius: 4px;"></div>
                                        <div style="width: 30px; height: 45px; background-color: var(--color-3); border-radius: 4px;"></div>
                                        <div style="width: 30px; height: 70px; background-color: var(--color-4); border-radius: 4px;"></div>
                                        <div style="width: 30px; height: 55px; background-color: var(--color-5); border-radius: 4px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h6 class="mb-0"><i class="bi bi-ui-checks"></i> Interface</h6>
                                </div>
                                <div class="card-body">
                                    <div id="ui-example" class="example-preview p-3">
                                        <div class="btn-group-vertical w-100" role="group">
                                            <button type="button" class="btn btn-sm mb-1" style="background-color: var(--color-1); color: white;">Botão Primário</button>
                                            <button type="button" class="btn btn-sm mb-1" style="background-color: var(--color-2); color: white;">Botão Secundário</button>
                                            <button type="button" class="btn btn-outline-secondary btn-sm" style="border-color: var(--color-3); color: var(--color-3);">Botão Outline</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0"><i class="bi bi-layout-wtf"></i> Layout Website</h6>
                                </div>
                                <div class="card-body">
                                    <div id="website-example" class="example-preview">
                                        <div style="display: grid; grid-template-rows: auto 1fr auto; height: 180px; border-radius: 6px; overflow: hidden;">
                                            <header style="background: linear-gradient(90deg, var(--color-1), var(--color-2)); color: white; padding: 12px; display: flex; justify-content: space-between; align-items: center;">
                                                <span style="font-weight: bold;">Logo</span>
                                                <div>
                                                    <span style="margin: 0 8px; font-size: 0.9em;">Home</span>
                                                    <span style="margin: 0 8px; font-size: 0.9em;">Sobre</span>
                                                    <span style="margin: 0 8px; font-size: 0.9em;">Contato</span>
                                                </div>
                                            </header>
                                            <main style="background-color: #f8f9fa; padding: 15px; display: flex; align-items: center; justify-content: center;">
                                                <div style="text-align: center;">
                                                    <h6 style="color: var(--color-1); margin-bottom: 8px;">Conteúdo Principal</h6>
                                                    <p style="color: var(--color-3); font-size: 0.85em; margin: 0;">Área de conteúdo usando as cores da paleta</p>
                                                </div>
                                            </main>
                                            <footer style="background-color: var(--color-4); color: white; padding: 10px; text-align: center; font-size: 0.8em;">
                                                Rodapé do Site
                                            </footer>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
</body>
</html>